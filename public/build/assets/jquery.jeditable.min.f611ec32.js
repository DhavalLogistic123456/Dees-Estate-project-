/*! jquery-jeditable https://github.com/NicolasCARPi/jquery_jeditable#readme */(function(a){a.fn.editableAriaShim=function(){return this.attr({role:"button",tabindex:0}),this},a.fn.editable=function(l,r){if(l!=="disable")if(l!=="enable"){if(l!=="destroy"){var e=a.extend({},a.fn.editable.defaults,{target:l},r),i=a.editable.types[e.type].plugin||function(){},p=a.editable.types[e.type].submit||function(){},x=a.editable.types[e.type].buttons||a.editable.types.defaults.buttons,y=a.editable.types[e.type].content||a.editable.types.defaults.content,w=a.editable.types[e.type].element||a.editable.types.defaults.element,v=a.editable.types[e.type].reset||a.editable.types.defaults.reset,C=a.editable.types[e.type].destroy||a.editable.types.defaults.destroy,m=e.callback||function(){},F=e.intercept||function(t){return t},O=e.onedit||function(){},z=e.onsubmit||function(){},E=e.onreset||function(){},Q=e.onerror||v;return e.before,e.tooltip&&a(this).attr("title",e.tooltip),this.each(function(){var t=this;a(this).data("event.editable",e.event),a.trim(a(this).html())||a(this).html(e.placeholder),l!=="destroy"?(a(this).bind(e.event,function(d){if(a(this).data("disabled.editable")!==!0&&d.which!==9&&!t.editing&&O.apply(this,[e,t,d])!==!1){if(e.before&&jQuery.isFunction(e.before))e.before(d);else if(e.before&&!jQuery.isFunction(e.before))throw"The 'before' option needs to be provided as a function!";d.preventDefault(),d.stopPropagation(),e.tooltip&&a(t).removeAttr("title"),a(this).html().toLowerCase().replace(/(;|"|\/)/g,"")===e.placeholder.toLowerCase().replace(/(;|"|\/)/g,"")&&a(this).html(""),t.editing=!0,t.revert=a(t).text(),a(t).html("");var o=a("<form />");e.cssclass&&(e.cssclass==="inherit"?o.attr("class",a(t).attr("class")):o.attr("class",e.cssclass)),e.style&&(e.style==="inherit"?(o.attr("style",a(t).attr("style")),o.css("display",a(t).css("display"))):o.attr("style",e.style)),e.label&&o.append("<label>"+e.label+"</label>"),e.formid&&o.attr("id",e.formid);var c,n,u=w.apply(o,[e,t]);e.inputcssclass&&(e.inputcssclass==="inherit"?u.attr("class",a(t).attr("class")):u.attr("class",e.inputcssclass));var T=!1;if(e.loadurl){n=t.setTimeout(function(){u.disabled=!0},100),a(t).html(e.loadtext);var k={};k[e.id]=t.id,a.isFunction(e.loaddata)?a.extend(k,e.loaddata.apply(t,[t.revert,e])):a.extend(k,e.loaddata),a.ajax({type:e.loadtype,url:e.loadurl,data:k,async:!1,cache:!1,success:function(h){t.clearTimeout(n),c=h,u.disabled=!1}})}else e.data?(c=e.data,a.isFunction(e.data)&&(c=e.data.apply(t,[t.revert,e]))):c=t.revert;if(y.apply(o,[c,e,t]),u.attr("name",e.name),e.width!=="none"){var I=e.width-(u.outerWidth(!0)-e.width);u.width(I)}x.apply(o,[e,t]),e.showfn&&a.isFunction(e.showfn)&&o.hide(),a(t).html(""),a(t).append(o),e.showfn&&a.isFunction(e.showfn)&&e.showfn(o),i.apply(o,[e,t]),o.find(":input:visible:enabled:first").focus(),e.select&&u.select(),a(this).keydown(function(h){h.which===27&&(h.preventDefault(),v.apply(o,[e,t]))}),e.onblur==="cancel"?u.blur(function(h){n=t.setTimeout(function(){v.apply(o,[e,t])},500)}):e.onblur==="submit"?u.blur(function(h){n=t.setTimeout(function(){o.submit()},200)}):a.isFunction(e.onblur)&&u.blur(function(h){e.onblur.apply(t,[u.val(),e,o])===!1&&v.apply(o,[e,t])}),o.submit(function(h){if(h.preventDefault(),h.stopPropagation(),T)return!1;if(T=!0,n&&t.clearTimeout(n),(T=z.apply(o,[e,t])!==!1)&&(T=p.apply(o,[e,t])!==!1))if(a.isFunction(e.target)){var L=function(f,D){T=!1,D!==!1&&(a(t).html(f),t.editing=!1,m.apply(t,[t.innerHTML,e]),a.trim(a(t).html())||a(t).html(e.placeholder))},j=e.target.apply(t,[u.val(),e,L]);j!==!1&&j!==void 0&&L(j,j)}else{var b={};b[e.name]=u.val(),b[e.id]=t.id,a.isFunction(e.submitdata)?a.extend(b,e.submitdata.apply(t,[t.revert,e,b])):a.extend(b,e.submitdata),e.method==="PUT"&&(b._method="put"),a(t).html(e.indicator);var P={type:"POST",complete:function(f,D){T=!1},data:b,dataType:"html",url:e.target,success:function(f,D){f=F.apply(t,[f,D]),P.dataType==="html"&&a(t).html(f),t.editing=!1,m.apply(t,[f,e,b]),a.trim(a(t).html())||a(t).html(e.placeholder)},error:function(f,D,G){Q.apply(o,[e,t,f])}};a.extend(P,e.ajaxoptions),a.ajax(P)}return a(t).attr("title",e.tooltip),!1})}}),t.reset=function(d){t.editing&&E.apply(d,[e,t])!==!1&&(a(t).text(t.revert),t.editing=!1,a.trim(a(t).html())||a(t).html(e.placeholder),e.tooltip&&a(t).attr("title",e.tooltip))},t.destroy=function(d){a(t).unbind(a(t).data("event.editable")).removeData("disabled.editable").removeData("event.editable"),t.clearTimeouts(),t.editing&&v.apply(d,[e,t])},t.clearTimeout=function(d){var o=a(t).data("timeouts");if(clearTimeout(d),o){var c=o.indexOf(d);c>-1?(o.splice(c,1),o.length<=0&&a(t).removeData("timeouts")):console.warn("jeditable clearTimeout could not find timeout "+d)}},t.clearTimeouts=function(){var d=a(t).data("timeouts");if(d){for(var o=0,c=d.length;o<c;++o)clearTimeout(d[o]);d.length=0,a(t).removeData("timeouts")}},t.setTimeout=function(d,o){var c=a(t).data("timeouts"),n=setTimeout(function(){d(),t.clearTimeout(n)},o);return c||(c=[],a(t).data("timeouts",c)),c.push(n),n}):C.apply(a(this).find("form"),[e,t])})}a(this).unbind(a(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable")}else a(this).data("disabled.editable",!1);else a(this).data("disabled.editable",!0)};var A=function(l){var r=document.createElement("input");return r.setAttribute("type",l),r.type!=="text"?l:"text"};a.editable={types:{defaults:{element:function(l,r){var e=a('<input type="hidden"></input>');return a(this).append(e),e},content:function(l,r,e){a(this).find(":input:first").val(l)},reset:function(l,r){r.reset(this)},destroy:function(l,r){r.destroy(this)},buttons:function(l,r){var e,i,p=this;l.submit&&(l.submit.match(/>$/)?e=a(l.submit).click(function(){e.attr("type")!=="submit"&&p.submit()}):((e=a('<button type="submit" />')).html(l.submit),l.submitcssclass&&e.addClass(l.submitcssclass)),a(this).append(e)),l.cancel&&(l.cancel.match(/>$/)?i=a(l.cancel):((i=a('<button type="cancel" />')).html(l.cancel),l.cancelcssclass&&i.addClass(l.cancelcssclass)),a(this).append(i),a(i).click(function(x){return(a.isFunction(a.editable.types[l.type].reset)?a.editable.types[l.type].reset:a.editable.types.defaults.reset).apply(p,[l,r]),!1}))}},text:{element:function(l,r){var e=a("<input />").attr({autocomplete:"off",list:l.list,maxlength:l.maxlength,pattern:l.pattern,placeholder:l.placeholder,tooltip:l.tooltip,type:"text"});return l.width!=="none"&&e.css("width",l.width),l.height!=="none"&&e.css("height",l.height),l.size&&e.attr("size",l.size),l.maxlength&&e.attr("maxlength",l.maxlength),a(this).append(e),e}},textarea:{element:function(l,r){var e=a("<textarea></textarea>");return l.rows?e.attr("rows",l.rows):l.height!=="none"&&e.height(l.height),l.cols?e.attr("cols",l.cols):l.width!=="none"&&e.width(l.width),l.maxlength&&e.attr("maxlength",l.maxlength),a(this).append(e),e}},select:{element:function(l,r){var e=a("<select />");return l.multiple&&e.attr("multiple","multiple"),a(this).append(e),e},content:function(l,r,e){var i;i=String===l.constructor?JSON.parse(l):l;var p,x,y=[];if(Array.isArray(i)&&i.every(Array.isArray))y=i,i={},y.forEach(function(m){i[m[0]]=m[1]});else for(p in i)y.push([p,i[p]]);r.sortselectoptions&&y.sort(function(m,F){return(m=m[1])<(F=F[1])?-1:m>F?1:0});for(var w=0;w<y.length;w++){p=y[w][0];var v=y[w][1];i.hasOwnProperty(p)&&p!=="selected"&&(x=a("<option />").val(p).append(v),i.selected!==p&&p!==a.trim(e.revert)||a(x).prop("selected","selected"),a(this).find("select").append(x))}if(!r.submit){var C=this;a(this).find("select").change(function(){C.submit()})}}},number:{element:function(l,r){var e=a("<input />").attr({maxlength:l.maxlength,placeholder:l.placeholder,min:l.min,max:l.max,step:l.step,tooltip:l.tooltip,type:A("number")});return l.width!=="none"&&e.css("width",l.width),a(this).append(e),e}},email:{element:function(l,r){var e=a("<input />").attr({maxlength:l.maxlength,placeholder:l.placeholder,tooltip:l.tooltip,type:A("email")});return l.width!=="none"&&e.css("width",l.width),a(this).append(e),e}},url:{element:function(l,r){var e=a("<input />").attr({maxlength:l.maxlength,pattern:l.pattern,placeholder:l.placeholder,tooltip:l.tooltip,type:A("url")});return l.width!=="none"&&e.css("width",l.width),a(this).append(e),e}}},addInputType:function(l,r){a.editable.types[l]=r}},a.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable keydown.editable",onblur:"cancel",tooltip:"Click to edit",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",sortselectoptions:!1,loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);
