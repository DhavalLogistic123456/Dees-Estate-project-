(function(a){a.saveimages=function(r,e){var s={handler:"saveimage.php",onComplete:function(){},customval:""};this.settings={};var i=a(r),r=r;this.init=function(){this.settings=a.extend({},s,e)},this.save=function(o){var v=this.settings.handler;this.settings.customval;var l=this.settings._token,n=new FormData;i.find("img").not("#divCb img").each(function(){if(a(this).attr("src").indexOf("base64")!=-1){var t=a(this).attr("src");image=t.replace(/^data:image\/(png|jpeg);base64,/,"");var h=t.split(";"),f=h[0].split(":")[1],m=h[1].split(",")[1],p=c(m,f);n.append("file[]",p)}}),n.has("file[]")&&a.ajax({type:"POST",url:v,headers:{"X-CSRF-TOKEN":l},data:n,contentType:!1,processData:!1,success:function(t){let h=t.data,f=0;i.find("img").not("#divCb img").each(function(){a(this).attr("src").indexOf("base64")!=-1&&(h[f].img_url&&a(this).attr("src",h[f].img_url),f++)})},error:function(t){console.error(t.responseJSON.message)}});var g=setInterval(function(){var t=!0;i.find("img").not("#divCb img").each(function(){a(this).attr("src").indexOf("base64")!=-1&&(t=!1)}),t&&(i.data("saveimages").settings.onComplete(),window.clearInterval(g))},2e3)},this.init()},a.fn.saveimages=function(d){return this.each(function(){if(a(this).data("saveimages")==null){var e=new a.saveimages(this,d);a(this).data("saveimages",e)}})};function c(d,e,s){e=e||"",s=s||512;for(var i=atob(d),r=[],o=0;o<i.length;o+=s){for(var v=i.slice(o,o+s),l=new Array(v.length),n=0;n<v.length;n++)l[n]=v.charCodeAt(n);var g=new Uint8Array(l);r.push(g)}var t=new Blob(r,{type:e});return t}})(jQuery);
